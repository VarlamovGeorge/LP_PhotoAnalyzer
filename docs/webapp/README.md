# Описание установки и настройки модуля webapp
## Добавление файла конфигурации
Для корректной работы модуля необходимо в каталог /webapp/webapp добавить файл config.py, имещий следующую структуру:

    SQLALCHEMY_DATABASE_URI = 'database-uri'
    SECRET_KEY = 'secret-key'

Где:
- database-uri - тип и путь БД для SQLAlchemy;
- secret-key - строка-ключ для шифрования паролей пользователей Flask-приложения.

## Создание БД и настройка приложения
Для создания БД (описание структуры базы данных, созданное в Sybase PowerDesigner 16.5, смотрии [тут](https://github.com/VarlamovGeorge/LP_PhotoAnalyzer/tree/master/docs/db_descr)) необходимо запустить файл create_db.py в папке /webapp
Поскольку таблицы БД зависят друг от друга, правильная последовательность наполнения базы должна быть следующей:
1. Создание пользователя в таблице users (см. ниже);
2. Заведение типов хранилищ фотографий в таблице storages (через GUI);
3. Внесение в таблицу storage_users пользователей хранилища (через GUI);
4. Внесение обрабатываемых папок с фотографиями из хранилища в таблицу folders (через GUI);
5. Заполнение справочника классов в таблице classes. Классы должны быть заполнены следующими значениями (id: class):
1: 'cars', 2: 'cats', 3: 'cities', 4: 'documents', 5: 'dogs', 6: 'food', 7: 'humans', 8: 'landscapes', 9: 'other';
6. Заполнение справочника алгоритмов нейронной сети в таблице algorithms, обрабатывающей фотографии (заполняется модулем crawler);
7. Заполнение таблицы photos обработанными фотографиями (заполняется модулем crawler);
8. Заполнение таблицы отнесения фотографий к справочнику классов photos_classes (заполняется модулем crawler);
9. Внесение настроек пользователя в таблицу user_preferences (через GUI).

В случае, когда все пункты выполнены - система готова к работе (в БД должны иметься данные о фильтруемых фотографиях - пункты 7 и 8).

## Создание пользователей
Для создания пользователей необходимо запустить файл create_user.py в каталоге /webapp.
